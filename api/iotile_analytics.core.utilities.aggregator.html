

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>iotile_analytics.core.utilities.aggregator module &mdash; IOTile Analytics 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iotile_analytics.core.utilities.domain module" href="iotile_analytics.core.utilities.domain.html" />
    <link rel="prev" title="iotile_analytics.core.utilities package" href="iotile_analytics.core.utilities.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> IOTile Analytics
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">5-Minute Quickstart Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="iotile_analytics.core.html">iotile_analytics.core package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="iotile_analytics.core.html#key-functions-and-classes">Key Functions and Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="iotile_analytics.core.html#submodules">Submodules</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="iotile_analytics.core.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="iotile_analytics.core.channels.html">iotile_analytics.core.channels package</a></li>
<li class="toctree-l4"><a class="reference internal" href="iotile_analytics.core.interaction.html">iotile_analytics.core.interaction package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="iotile_analytics.core.utilities.html">iotile_analytics.core.utilities package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iotile_analytics.offline.html">iotile_analytics.offline package</a></li>
<li class="toctree-l2"><a class="reference internal" href="iotile_analytics.interactive.html">iotile_analytics.interactive package</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IOTile Analytics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">API Reference</a> &raquo;</li>
        
          <li><a href="iotile_analytics.core.html">iotile_analytics.core package</a> &raquo;</li>
        
          <li><a href="iotile_analytics.core.utilities.html">iotile_analytics.core.utilities package</a> &raquo;</li>
        
      <li>iotile_analytics.core.utilities.aggregator module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/iotile_analytics.core.utilities.aggregator.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-iotile_analytics.core.utilities.aggregator">
<span id="iotile-analytics-core-utilities-aggregator-module"></span><h1>iotile_analytics.core.utilities.aggregator module<a class="headerlink" href="#module-iotile_analytics.core.utilities.aggregator" title="Permalink to this headline">¶</a></h1>
<p>A class that lets you compare portions of multiple timeseries datasets.</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Classes:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector" title="iotile_analytics.core.utilities.aggregator.TimeseriesSelector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TimeseriesSelector</span></code></a></td>
<td>A utility class for aggregating and selecting data from multiple timeseries.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector">
<em class="property">class </em><code class="descclassname">iotile_analytics.core.utilities.aggregator.</code><code class="descname">TimeseriesSelector</code><span class="sig-paren">(</span><em>timezone='UTC'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A utility class for aggregating and selecting data from multiple timeseries.</p>
<p>The selector keeps track of the first and last timestamp that was added and lets
you restrict data to only a given day, week or month while iterating through every
such segment of the data.</p>
<p>This is particularly useful for producing coherent views and reports of data that
may cover different intersecting but not identical time spans.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timezone</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The timezone to use to localize all data coming in so that days
correspond correctly to days in that timezone.  Default: UTC.  This should be
a timzeone value like ‘US/Central’.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector.add_data">
<code class="descname">add_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector.add_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector.add_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new dataset to the aggregator.</p>
<p>The data is homogenized and the underlying domain of the aggregator is
extended if necessary.  The data itself is not stored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>pd.DataFrame</em>) – A dataframe to add to our aggregator.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector.months">
<code class="descname">months</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector.months"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector.months" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all of the unique months spanning our data domain.</p>
<p>The results are returned in time order with duplicates removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">pd.PeriodIndex</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector.weeks">
<code class="descname">weeks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector.weeks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector.weeks" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all unique weeks spanning our data domain.</p>
<p>The results are returned in time order with duplicates removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">pd.PeriodIndex</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector.days">
<code class="descname">days</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector.days"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector.days" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all unique days spanning our data domain.</p>
<p>The results are returned in time order with duplicates removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>The day date masks that can be used to select a subset</dt>
<dd>of data from this aggregator.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of datemasks</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector.divide_period">
<code class="descname">divide_period</code><span class="sig-paren">(</span><em>period</em>, <em>freq</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector.divide_period"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector.divide_period" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a single period into a PeriodIndex with a given frequency.</p>
<p>For example you could subdivide a month into days or a week into hours.
The subdivision will be performed down to second precision by default.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>period</strong> (<em>pd.Period</em>) – The period that we wish to subdivide.  If this is None
we default to subdividing the entire domain of this object.</li>
<li><strong>freq</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – A Pandas frequency string to use to determine how big the
chunks are that we are going to subdivid period into.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The subdivided period.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DatetimeIndex</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.core.utilities.aggregator.TimeseriesSelector.resample">
<code class="descname">resample</code><span class="sig-paren">(</span><em>data</em>, <em>period</em>, <em>freq</em>, <em>resample='last'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/core/utilities/aggregator.html#TimeseriesSelector.resample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.core.utilities.aggregator.TimeseriesSelector.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to restrict and resample a data set.</p>
<p>The data set is restricted to the indicated period and if necessary
resampled to appropriate frequency.  If the data is already sampled
at the correct frequency then no resampling occurs and NaNs are used
to fill in any gaps in the indicated period.</p>
<p>Naive timestamps in data are assumed to be in UTC and localized to
the configured timezone of this selector before resampling.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<em>pd.DataFrame</em>) – The data that we would like to sample.</li>
<li><strong>period</strong> (<em>pd.Period</em>) – The period that we want to look at.</li>
<li><strong>freq</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The sampling frequency that we would like to use.</li>
<li><strong>resample</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – An optional resampling function in case we need to
resample the data we are given.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="iotile_analytics.core.utilities.domain.html" class="btn btn-neutral float-right" title="iotile_analytics.core.utilities.domain module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="iotile_analytics.core.utilities.html" class="btn btn-neutral" title="iotile_analytics.core.utilities package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Arch Systems Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>