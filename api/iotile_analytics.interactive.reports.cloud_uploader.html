

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>iotile_analytics.interactive.reports.cloud_uploader module &mdash; IOTile Analytics 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iotile_analytics.interactive.reports.info_report module" href="iotile_analytics.interactive.reports.info_report.html" />
    <link rel="prev" title="iotile_analytics.interactive.reports.branded_report module" href="iotile_analytics.interactive.reports.branded_report.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> IOTile Analytics
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">5-Minute Quickstart Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="iotile_analytics.core.html">iotile_analytics.core package</a></li>
<li class="toctree-l2"><a class="reference internal" href="iotile_analytics.offline.html">iotile_analytics.offline package</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="iotile_analytics.interactive.html">iotile_analytics.interactive package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="iotile_analytics.interactive.html#key-functions-and-classes">Key Functions and Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="iotile_analytics.interactive.html#submodules">Submodules</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="iotile_analytics.interactive.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="iotile_analytics.interactive.reports.html">iotile_analytics.interactive.reports package</a></li>
<li class="toctree-l4"><a class="reference internal" href="iotile_analytics.interactive.scripts.html">iotile_analytics.interactive.scripts package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IOTile Analytics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">API Reference</a> &raquo;</li>
        
          <li><a href="iotile_analytics.interactive.html">iotile_analytics.interactive package</a> &raquo;</li>
        
          <li><a href="iotile_analytics.interactive.reports.html">iotile_analytics.interactive.reports package</a> &raquo;</li>
        
      <li>iotile_analytics.interactive.reports.cloud_uploader module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/iotile_analytics.interactive.reports.cloud_uploader.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-iotile_analytics.interactive.reports.cloud_uploader">
<span id="iotile-analytics-interactive-reports-cloud-uploader-module"></span><h1>iotile_analytics.interactive.reports.cloud_uploader module<a class="headerlink" href="#module-iotile_analytics.interactive.reports.cloud_uploader" title="Permalink to this headline">¶</a></h1>
<p>Helper class that manages uploading a series of report files to iotile.cloud.</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Classes:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#iotile_analytics.interactive.reports.cloud_uploader.ReportUploader" title="iotile_analytics.interactive.reports.cloud_uploader.ReportUploader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ReportUploader</span></code></a></td>
<td>Upload a series of files to S3 using signed URLs.</td>
</tr>
</tbody>
</table>
<p>Functions:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#iotile_analytics.interactive.reports.cloud_uploader.encode_multipart" title="iotile_analytics.interactive.reports.cloud_uploader.encode_multipart"><code class="xref py py-obj docutils literal notranslate"><span class="pre">encode_multipart</span></code></a></td>
<td>Standalone multipart form encoder.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="iotile_analytics.interactive.reports.cloud_uploader.ReportUploader">
<em class="property">class </em><code class="descclassname">iotile_analytics.interactive.reports.cloud_uploader.</code><code class="descname">ReportUploader</code><span class="sig-paren">(</span><em>domain=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/interactive/reports/cloud_uploader.html#ReportUploader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.interactive.reports.cloud_uploader.ReportUploader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Upload a series of files to S3 using signed URLs.</p>
<p>There are two ways to use this class.  You can use the synchronous
all-in-one upload_report function that takes in a list of files, and
uploads them in one shot, or you can use the a-la-cart interface.</p>
<p>The synchronous interface is to just call <cite>upload_report</cite> and pass
it a list of paths to the files to upload.  It will synchronously
create a report object on iotile.cloud, upload all files and then
notify the cloud about our success.</p>
<p>The a-la-carte interface lets you perform these three steps yourself:</p>
<ul class="simple">
<li>create_report(): starts the report upload process, returning a report id.</li>
<li>upload_file(): queues a file for background uploading and starts uploading
it immediately.  This function does not wait for the file upload to finish
but returns as soon as it has been queued.</li>
<li>finish_report(): Waits for all outstanding file uploads to finish and
then tells iotile.cloud that we have finished uploading the report.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>domain</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The iotile.cloud instance that we should use. If
not passed, this defaults to <a class="reference external" href="https://iotile.cloud">https://iotile.cloud</a></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.upload_report">
<code class="descname">upload_report</code><span class="sig-paren">(</span><em>label</em>, <em>files</em>, <em>report_id=None</em>, <em>group=None</em>, <em>slug=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/interactive/reports/cloud_uploader.html#ReportUploader.upload_report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.upload_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a report to iotile.cloud to attach to a device or archive.</p>
<p>The report will be attached to the given AnalysisGroup, or you can
specify the slug of the object to attach the report to explicitly. You
must specify EITHER group OR slug and the currently logged in user
must have permission to upload reports for org that owns the object
that you are attaching the report to.</p>
<p>You must give the report a human readable label that will be shown
in lists where users may select to view the report.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The human readable label for the report that you
are uploading.</li>
<li><strong>report_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The ID of a GeneratedUserReport instance, if one
was given. Report files will be attached to this existing report.
If this is not specified, a new report record will be created.</li>
<li><strong>files</strong> (<em>list of str</em>) – A list of all of the files that should
be uploaded for this report including the main entrypoint
file that should be listed first.</li>
<li><strong>group</strong> (<a class="reference internal" href="iotile_analytics.core.group.html#iotile_analytics.core.group.AnalysisGroup" title="iotile_analytics.core.group.AnalysisGroup"><em>AnalysisGroup</em></a>) – The analysis group that was used to generate
this report.  If this is not specified then you must explicitly
specify the slug of the object used to generate the report and
the slug of the organization that it should be uploaded for.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A URL where the uploaded report can be accessed.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.create_report">
<code class="descname">create_report</code><span class="sig-paren">(</span><em>label</em>, <em>group=None</em>, <em>slug=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/interactive/reports/cloud_uploader.html#ReportUploader.create_report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.create_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a report record on iotile.cloud.</p>
<p>This synchronously notifies that cloud that we are going to be
uploading a report.  After this function returns you can call
upload_file repeatedly to upload each file in the report and then
after you are finished you can call finish_report() to finish the
report.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The human readable label for the report that you
are uploading.</li>
<li><strong>group</strong> (<a class="reference internal" href="iotile_analytics.core.group.html#iotile_analytics.core.group.AnalysisGroup" title="iotile_analytics.core.group.AnalysisGroup"><em>AnalysisGroup</em></a>) – The analysis group that was used to generate
this report.  If this is not specified then you must explicitly
specify the slug of the object used to generate the report and
the slug of the organization that it should be uploaded for.</li>
<li><strong>slug</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Optional string to override the slug that would be inferred
from group.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The report id of the report that was created.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.finish_report">
<code class="descname">finish_report</code><span class="sig-paren">(</span><em>report_id</em>, <em>index_path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/interactive/reports/cloud_uploader.html#ReportUploader.finish_report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.finish_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify the cloud that we have successfully finished uploading all files for a report.</p>
<p>The report should have been created by a previous call to create_report().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>report_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The report id returned from the call to create_report()</li>
<li><strong>index_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The file path passed to a previous call to upload_file()
that should be treated as the main entry point to this report.
This path is not cleaned in any way except that characters are
converted to /.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A URL where the uploaded report can be accessed.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.upload_file">
<code class="descname">upload_file</code><span class="sig-paren">(</span><em>report_id</em>, <em>file_path</em>, <em>file_data</em>, <em>public=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/interactive/reports/cloud_uploader.html#ReportUploader.upload_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.interactive.reports.cloud_uploader.ReportUploader.upload_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a file asynchronously as part of this report.</p>
<p>This function will return immediately and queue the file for
background uploading.  All files are guaranteed to be uploaded
by the time a call to finish_report() returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>report_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The report id returned from the call to create_report()</li>
<li><strong>file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The key that should be used for this file on s3.
This path is not cleaned in any way except that characters are
converted to /.</li>
<li><strong>file_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – The data that should be uploaded for this file.</li>
<li><strong>public</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether this file should be protected or public.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="iotile_analytics.interactive.reports.cloud_uploader.encode_multipart">
<code class="descclassname">iotile_analytics.interactive.reports.cloud_uploader.</code><code class="descname">encode_multipart</code><span class="sig-paren">(</span><em>fields</em>, <em>files</em>, <em>boundary=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iotile_analytics/interactive/reports/cloud_uploader.html#encode_multipart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#iotile_analytics.interactive.reports.cloud_uploader.encode_multipart" title="Permalink to this definition">¶</a></dt>
<dd><p>Standalone multipart form encoder.</p>
<p>Taken from:
<a class="reference external" href="http://code.activestate.com/recipes/578668-encode-multipart-form-data-for-uploading-files-via/">http://code.activestate.com/recipes/578668-encode-multipart-form-data-for-uploading-files-via/</a></p>
<p>Licensed under MIT, Written by: Ben Hoyt</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="iotile_analytics.interactive.reports.info_report.html" class="btn btn-neutral float-right" title="iotile_analytics.interactive.reports.info_report module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="iotile_analytics.interactive.reports.branded_report.html" class="btn btn-neutral" title="iotile_analytics.interactive.reports.branded_report module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Arch Systems Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>