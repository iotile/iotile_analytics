<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>{{ title|e if title else "Live Report" }}</title>
        <style>
            {% include "report_style.css" %}
        </style>

        {% for style in extra_css %}
        <style>
            {{ style | indent(12) }}
        </style>
        {% endfor %}

        {{ bokeh_css }}
        {{ bokeh_js }}

        <!-- Autoinclude jquery for advanced actions -->
        <script type="text/javascript">
            {{ include_file('jquery-3.3.1.min.js') }}
        </script>

        <!-- Autogenerated script tag to load in jsonp files into a specific data source -->
        <script type="text/javascript">
            function load_jsonp(model_id, identifier) {
                var safe_id = model_id.replace('-', '_');
                var script = document.createElement('script');
                script.src = 'data/' + safe_id + "_" + identifier + ".jsonp";
                document.getElementsByTagName('head')[0].appendChild(script);
            }

            {% for model_id, load_obj in loadable_models.items() %}
                //Function to load data into model {{ model_id }}
                function {{ load_obj.load_function }}(data) {
                    var model = Bokeh.documents[0].get_model_by_id("{{ model_id }}");
                    model.data = data;
                }

                function {{load_obj.trigger_function}}(identifier) {
                    load_jsonp("{{ load_obj.safe_id }}", identifier);
                }
            {% endfor %}

            
        </script>

        {% for script in extra_scripts %}
        <script type="text/javascript">
            {{ script }}
        </script>
        {% endfor %}
    </head>
    <body>
        <div class="outercontainer">
            {% if header is not none %}
            <div class="header">
                {{ header }}
            </div><!-- .header -->
            {% endif %}

            <div class="content">
                {% if before_content is not none %}
                {{ before_content | indent(12) }}
                {% endif %}

                {{ plot_div | indent(12) }}
                {{ plot_script }}

                {% if after_content is not none %}
                {{ after_content | indent(12) }}
                {% endif %}

                <div class="page-info">
                    <p>Generated on {{ timestamp }}.</p>
                </div>
            </div><!-- .content -->

            {% if footer is not none %}
            <div class="footer">
                {{ footer }}
            </div><!-- .footer -->
            {% endif %}
        </div>
    </body>
</html>